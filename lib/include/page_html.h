#ifndef PAGE_HTML_H
#define PAGE_HTML_H

const char HTML_BODY[] =
"<!DOCTYPE html><html lang=\"pt-BR\"><head><meta charset=\"UTF-8\"><meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0\"><title>EstaÃ§Ã£o MeteorolÃ³gica</title><style>body{font-family:Arial,sans-serif;margin:0;padding:1rem;background:#f0f4f8}h1{text-align:center;color:#333}.status{text-align:center;margin:1rem 0;padding:.5rem;border-radius:5px}.status.ok{background:#d4edda;color:#155724;border:1px solid #c3e6cb}.status.alert{background:#f8d7da;color:#721c24;border:1px solid #f5c6cb}.card{background:#fff;border-radius:10px;box-shadow:0 0 10px rgba(0,0,0,0.1);padding:1.5rem;margin:1rem auto;max-width:600px}.sensor-values{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:1rem;font-size:1.2rem;text-align:center}.sensor-item{padding:1rem;background:#f8f9fa;border-radius:8px;border:2px solid #e9ecef}.sensor-item.alert{border-color:#dc3545;background:#fff5f5}form{display:grid;gap:1rem}.form-group{display:grid;grid-template-columns:1fr 1fr;gap:.5rem;align-items:center}label{font-weight:bold}input{padding:.5rem;font-size:1rem;border:1px solid #ccc;border-radius:4px}button{padding:.75rem;font-size:1rem;background:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}button:hover{background:#0056b3}.button-group{display:flex;gap:.5rem;justify-content:center}@media(max-width:500px){.sensor-values{grid-template-columns:1fr}.form-group{grid-template-columns:1fr}}</style></head><body><h1>ğŸŒ¡ï¸ EstaÃ§Ã£o MeteorolÃ³gica</h1><div id=\"status-bar\" class=\"status ok\">Carregando dados...</div><div class=\"card\"><h2>ğŸ“Š Leituras dos Sensores</h2><div class=\"sensor-values\"><div class=\"sensor-item\" id=\"temp-item\"><div>ğŸŒ¡ï¸ <strong>Temperatura</strong></div><div><span id=\"temp\">--</span>Â°C</div></div><div class=\"sensor-item\" id=\"humidity-item\"><div>ğŸ’§ <strong>Umidade</strong></div><div><span id=\"humidity\">--</span>%</div></div><div class=\"sensor-item\" id=\"pressure-item\"><div>ğŸ“ˆ <strong>PressÃ£o</strong></div><div><span id=\"pressure\">--</span> hPa</div></div></div></div><div class=\"card\"><h2>âš™ï¸ ConfiguraÃ§Ãµes de Limites</h2><form id=\"config-form\"><div class=\"form-group\"><label for=\"min_temp\">ğŸŒ¡ï¸ Temp. MÃ­nima (Â°C):</label><input type=\"number\" id=\"min_temp\" name=\"min_temp\" step=\"0.1\" required></div><div class=\"form-group\"><label for=\"max_temp\">ğŸŒ¡ï¸ Temp. MÃ¡xima (Â°C):</label><input type=\"number\" id=\"max_temp\" name=\"max_temp\" step=\"0.1\" required></div><div class=\"form-group\"><label for=\"min_hum\">ğŸ’§ Umidade MÃ­nima (%):</label><input type=\"number\" id=\"min_hum\" name=\"min_hum\" step=\"0.1\" min=\"0\" max=\"100\" required></div><div class=\"form-group\"><label for=\"max_hum\">ğŸ’§ Umidade MÃ¡xima (%):</label><input type=\"number\" id=\"max_hum\" name=\"max_hum\" step=\"0.1\" min=\"0\" max=\"100\" required></div><div class=\"form-group\"><label for=\"min_press\">ğŸ“ˆ PressÃ£o MÃ­nima (hPa):</label><input type=\"number\" id=\"min_press\" name=\"min_press\" step=\"0.1\" required></div><div class=\"form-group\"><label for=\"max_press\">ğŸ“ˆ PressÃ£o MÃ¡xima (hPa):</label><input type=\"number\" id=\"max_press\" name=\"max_press\" step=\"0.1\" required></div><div class=\"button-group\"><button type=\"submit\">ğŸ’¾ Salvar Limites</button><button type=\"button\" id=\"reset-btn\">ğŸ”„ Resetar PadrÃ£o</button><button type=\"button\" id=\"toggle-alerts\">ğŸ”” Alternar Alertas</button></div></form></div><script>let alertsEnabled=true;async function fetchData(){try{console.log(\"Buscando dados dos sensores...\");const[tempRes,humRes,presRes,limRes,statusRes]=await Promise.all([fetch(\"/temperature\"),fetch(\"/humidity\"),fetch(\"/atm_pressure\"),fetch(\"/limits\"),fetch(\"/sensor_status\")]);if(!tempRes.ok||!humRes.ok||!presRes.ok)throw new Error(\"Erro ao buscar dados dos sensores\");const temp=await tempRes.json(),hum=await humRes.json(),pres=await presRes.json(),limits=await limRes.json(),status=await statusRes.json();console.log(\"Dados recebidos:\",{temp,hum,pres,limits,status});document.getElementById(\"temp\").textContent=temp.value?temp.value.toFixed(1):\"--\";document.getElementById(\"humidity\").textContent=hum.value?hum.value.toFixed(1):\"--\";document.getElementById(\"pressure\").textContent=pres.value?pres.value.toFixed(1):\"--\";document.getElementById(\"min_temp\").value=limits.min_temp||\"\";document.getElementById(\"max_temp\").value=limits.max_temp||\"\";document.getElementById(\"min_hum\").value=limits.min_hum||\"\";document.getElementById(\"max_hum\").value=limits.max_hum||\"\";document.getElementById(\"min_press\").value=limits.min_press||\"\";document.getElementById(\"max_press\").value=limits.max_press||\"\";alertsEnabled=limits.alert_enabled!==false;const statusBar=document.getElementById(\"status-bar\"),tempItem=document.getElementById(\"temp-item\"),humItem=document.getElementById(\"humidity-item\"),presItem=document.getElementById(\"pressure-item\");tempItem.classList.toggle(\"alert\",!status.temperature.ok);humItem.classList.toggle(\"alert\",!status.humidity.ok);presItem.classList.toggle(\"alert\",!status.pressure.ok);if(status.all_ok){statusBar.className=\"status ok\";statusBar.textContent=\"âœ… Todos os sensores funcionando normalmente\"}else{statusBar.className=\"status alert\";statusBar.textContent=\"âš ï¸ \"+status.alert_message}}catch(err){console.error(\"Erro ao buscar dados:\",err);const s=document.getElementById(\"status-bar\");s.className=\"status alert\";s.textContent=\"âŒ Erro de conexÃ£o: \"+err.message}}document.getElementById(\"config-form\").addEventListener(\"submit\",async e=>{e.preventDefault();try{const formData={min_temp:parseFloat(document.getElementById(\"min_temp\").value),max_temp:parseFloat(document.getElementById(\"max_temp\").value),min_hum:parseFloat(document.getElementById(\"min_hum\").value),max_hum:parseFloat(document.getElementById(\"max_hum\").value),min_press:parseFloat(document.getElementById(\"min_press\").value),max_press:parseFloat(document.getElementById(\"max_press\").value)};console.log(\"Enviando limites:\",formData);const res=await fetch(\"/limits\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(formData)}),result=await res.json();if(result.status===\"success\")alert(\"âœ… Limites atualizados com sucesso!\");else alert(\"âŒ Erro: \"+result.message)}catch(err){console.error(\"Erro ao salvar limites:\",err);alert(\"âŒ Erro de conexÃ£o ao salvar limites\")}});document.getElementById(\"reset-btn\").addEventListener(\"click\",async()=>{if(confirm(\"Deseja resetar todos os limites aos valores padrÃ£o?\"))try{const r=await fetch(\"/reset_limits\",{method:\"POST\"}),result=await r.json();if(result.status===\"success\"){alert(\"âœ… Limites resetados!\");fetchData()}}catch{alert(\"âŒ Erro ao resetar limites\")}});document.getElementById(\"toggle-alerts\").addEventListener(\"click\",async()=>{try{const r=await fetch(\"/toggle_alerts\",{method:\"POST\"}),result=await r.json();if(result.status===\"success\"){alertsEnabled=result.alert_enabled;alert(alertsEnabled?\"ğŸ”” Alertas ativados!\":\"ğŸ”• Alertas desativados!\")}}catch{alert(\"âŒ Erro ao alternar alertas\")}});console.log(\"Iniciando aplicaÃ§Ã£o...\");fetchData();setInterval(fetchData,3000);</script></body></html>";

#endif // PAGE_HTML_H
